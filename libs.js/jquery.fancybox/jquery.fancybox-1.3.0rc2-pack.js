(function(y){var I,S,P,J,d,u,k,H,M,x;var B=0,F={},g=[],e=0,D={},w=[];var f=null,Q=new Image,G=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,j=/[^\.]\.(swf)\s*$/i;var o,K=1;var a,c,N=false,A=20,r=y.extend(y("<div/>")[0],{prop:0}),i=0,R=!y.support.opacity&&!window.XMLHttpRequest;y.fn.fixPNG=function(){return this.each(function(){var V=y(this).css("backgroundImage");if(V.match(/^url\(["']?(.*\.png)["']?\)$/i)){V=RegExp.$1;y(this).css({"backgroundImage":"none","filter":"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod="+(y(this).css("backgroundRepeat")=="no-repeat"?"crop":"scale")+", src='"+V+"')"}).each(function(){var W=y(this).css("position");if(W!="absolute"&&W!="relative"){y(this).css("position","relative");}});}});};y.fn.fancybox=function(V){y(this).data("fancybox",y.extend({},V));y(this).unbind("click.fb").bind("click.fb",function(X){X.preventDefault();if(N){return;}y(this).blur();N=true;g=[];B=0;var W=y(this).attr("rel")||"";if(!W||W==""||W==="nofollow"){g.push(this);}else{g=y("a[rel="+W+"], area[rel="+W+"]");B=g.index(this);}l();return false;});return this;};y.fancybox=function(Y,X){if(N){return;}N=true;g=[];B=0;if(y.isArray(Y)){for(var W=0,V=Y.length;W<V;W++){if(typeof Y[W]=="object"){y(Y[W]).data("fancybox",y.extend({},X,Y[W]));}else{Y[W]=y({}).data("fancybox",y.extend({content:Y[W]},X));}}g=jQuery.merge(g,Y);}else{if(typeof Y=="object"){y(Y).data("fancybox",y.extend({},X,Y));}else{Y=y({}).data("fancybox",y.extend({content:Y},X));}g.push(Y);}l();};y.fancybox.showActivity=function(){clearInterval(o);S.show();o=setInterval(m,66);};y.fancybox.prev=function(){return y.fancybox.pos(e-1);};y.fancybox.next=function(){return y.fancybox.pos(e+1);};y.fancybox.pos=function(V){if(N){return;}V=parseInt(V);if(V>-1&&w.length>V){B=V;l();}if(D.cyclic&&w.length>1&&V<0){B=w.length-1;l();}if(D.cyclic&&w.length>1&&V>=w.length){B=0;l();}return;};y.fancybox.cancel=function(){if(N){return;}N=true;y.event.trigger("fancybox-cancel");h();if(F&&y.isFunction(F.onCancel)){F.onCancel(g,B,F);}N=false;};y.fancybox.close=function(){if(N||J.is(":hidden")){return;}N=true;if(D&&y.isFunction(D.onCleanup)){if(D.onCleanup(w,e,D)===false){N=false;return;}}h();y(H.add(M).add(x)).hide();y("#fancybox-title").remove();J.add(u).add(P).unbind();y(window).unbind("resize.fb scroll.fb");y(document).unbind("keydown.fb");function V(){P.fadeOut("fast");J.hide();y.event.trigger("fancybox-cleanup");u.empty();u.removeAttr("filter");J.removeAttr("filter").css("opacity","");if(y.isFunction(D.onClosed)){D.onClosed(w,e,D);}w=F=[];e=selecteIndex=0;D=F={};N=false;}u.css("overflow","hidden");if(D.transitionOut=="elastic"){a=U();var W=J.position();c={top:W.top,left:W.left,width:J.width(),height:J.height()};if(D.opacity){c.opacity=1;}r.prop=1;y(r).animate({prop:0},{duration:D.speedOut,easing:D.easingOut,step:E,complete:V});}else{J.fadeOut(D.transitionOut=="none"?0:D.speedOut,V);}};y.fancybox.resize=function(){if(N||J.is(":hidden")){return;}N=true;var W=u.wrapInner("<div style='overflow:auto'></div>").children();var V=W.height();J.css({height:V+(D.padding*2)+i});u.css({height:V});W.replaceWith(W.children());y.fancybox.center();};y.fancybox.center=function(){N=true;var V=C();var W=D.margin;var X={width:J.width(),height:J.height()};X.top=V[3]+((V[1]-(X.height+(A*2)))*0.5);X.left=V[2]+((V[0]-(X.width+(A*2)))*0.5);X.top=X.top<V[3]+W?V[3]+W:X.top;X.left=X.left<V[2]+W?V[2]+W:X.left;y(J).css(X);N=false;};function h(){S.hide();y(Q).unbind();if(f){f.abort();}I.empty();}function l(){h();var aa=g[B];if(typeof y(aa).data("fancybox")=="undefined"){F=y.extend({},y.fn.fancybox.defaults,F);}else{F=y.extend({},y.fn.fancybox.defaults,y(aa).data("fancybox"));}var X,Y,ac=aa.title||y(aa).title||F.title||"";if(aa.nodeName&&(/^(?:javascript|#)/i).test(aa.href)){X=F.href||null;}else{X=aa.href||y(aa).href||F.href||null;}if(F.type){Y=F.type;if(!X){X=F.content;}}else{if(X){if(X.match(G)){Y="image";}else{if(X.match(j)){Y="swf";}else{if(y(aa).hasClass("iframe")){Y="iframe";}else{if(X.match(/#/)){aa=X.substr(X.indexOf("#"));Y=y(aa).length>0?"inline":"ajax";}else{Y="ajax";}}}}}else{if(F.content){aa=F.content;Y="html";F.content=null;}else{Y="inline";}}}F.type=Y;F.href=X;F.title=ac;if(F.autoDimensions&&F.type!=="iframe"&&F.type!=="swf"){F.frameWidth="auto";F.frameHeight="auto";}if(F.modal){F.overlayShow=true;F.hideOnOverlayClick=false;F.hideOnContentClick=false;F.enableEscapeButton=false;F.showCloseButton=false;}if(y.isFunction(F.onStart)){if(F.onStart(g,B,F)===false){N=false;return;}}I.css("padding",(A+F.padding+F.margin));y(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){y(this).replaceWith(u.children());});switch(Y){case"html":I.html(aa);q();break;case"inline":y('<div class="fancybox-inline-tmp" />').hide().insertBefore(y(aa)).bind("fancybox-cleanup",function(){y(this).replaceWith(u.children());}).bind("fancybox-cancel",function(){y(this).replaceWith(I.children());});y(aa).appendTo(I);q();break;case"image":Q=new Image;Q.src=X;if(Q.complete){O();}else{N=false;y.fancybox.showActivity();y(Q).unbind().one("load",O);}break;case"swf":var ab="";var W="";ab+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+F.frameWidth+'" height="'+F.frameHeight+'"><param name="movie" value="'+X+'"></param>';y.each(F.swf,function(ad,ae){ab+='<param name="'+ad+'" value="'+ae+'"></param>';W+=" "+ad+'="'+ae+'"';});ab+='<embed src="'+X+'" type="application/x-shockwave-flash" width="'+F.frameWidth+'" height="'+F.frameHeight+'"'+W+"></embed></object>";I.html(ab);q();break;case"ajax":var V=X.split("#",2);var Z=F.ajax.data||{};if(V.length>1){X=V[0];typeof Z=="string"?Z+="&selector="+V[1]:Z["selector"]=V[1];}N=false;y.fancybox.showActivity();f=y.ajax(y.extend(F.ajax,{url:X,data:Z,success:function(ad){I.html(ad);q();}}));break;case"iframe":N=false;y.fancybox.showActivity();y('<iframe id="fancybox-frame" name="fancybox-frame'+Math.round(Math.random()*1000)+'" frameborder="0" hspace="0" src="'+X+'"></iframe>').appendTo(I).load(function(){N=true;y(this).unbind();s();});break;}}function O(){N=true;F.frameWidth=Q.width;F.frameHeight=Q.height;y("<img />").attr({"id":"fancybox-img","src":Q.src,"alt":F.title}).appendTo(I);s();}function q(){I.width(F.frameWidth);I.height(F.frameHeight);if(F.frameWidth=="auto"){F.frameWidth=I.width();}if(F.frameHeight=="auto"){F.frameHeight=I.height();}s();}function s(){S.hide();if(J.is(":visible")&&y.isFunction(D.onCleanup)){if(D.onCleanup(w,e,D)===false){y.event.trigger("fancybox-cancel");N=false;return;}}w=g;e=B;D=F;u[0].scrollTop=0;u[0].scrollLeft=0;if(D.overlayShow){if(R){y("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden";}).css({"visibility":"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit";});}P.css({"background-color":D.overlayColor,"opacity":D.overlayOpacity}).unbind().show();}c=b();p();if(J.is(":visible")){y(H.add(M).add(x)).hide();var W=J.position();a={top:W.top,left:W.left,width:J.width(),height:J.height()};var V=(a.width==c.width&&a.height==c.height);u.fadeOut(D.changeFade,function(){y.event.trigger("fancybox-change");u.css({top:D.padding,left:D.padding,width:a.width-(D.padding*2)>0?a.width-(D.padding*2):1,height:a.height-(D.padding*2)>0?a.height-(D.padding*2):1}).empty();u.css("overflow","hidden");function X(){u.html(I.contents()).fadeIn(D.changeFade,t);}r.prop=0;y(r).animate({prop:1},{duration:V?0:D.changeSpeed,easing:D.easingChange,step:E,complete:X});});return;}if(D.transitionIn=="elastic"){a=U();u.css({top:D.padding,left:D.padding,width:a.width-(D.padding*2)>0?a.width-(D.padding*2):1,height:a.height-(D.padding*2)>0?a.height-(D.padding*2):1});u.html(I.contents());J.css(a).show();if(D.opacity){c.opacity=0;}r.prop=0;y(r).animate({prop:1},{duration:D.speedIn,easing:D.easingIn,step:E,complete:t});}else{u.css({top:D.padding,left:D.padding,width:c.width-(D.padding*2)>0?c.width-(D.padding*2):1,height:c.height-(D.padding*2)-i>0?c.height-(D.padding*2)-i:1});u.html(I.contents());J.css(c).fadeIn(D.transitionIn=="none"?0:D.speedIn,t);}}function E(aa){var X=Math.round(a.width+(c.width-a.width)*aa);var V=Math.round(a.height+(c.height-a.height)*aa);var Z=Math.round(a.top+(c.top-a.top)*aa);var Y=Math.round(a.left+(c.left-a.left)*aa);y(J).css({"width":X+"px","height":V+"px","top":Z+"px","left":Y+"px"});X-=D.padding*2;V-=D.padding*2+(i*aa);X=X>0?X:0;V=V>0?V:0;u.css({"width":X+"px","height":V+"px"});if(typeof c.opacity!=="undefined"){var W=aa<0.5?0.5:aa;J.css("opacity",W);}}function t(){u.removeAttr("filter");J.removeAttr("filter").css("opacity","");if(y(w[e]).is("img")==false&&F.type!=="image"&&F.type!=="iframe"){u.css({"overflow":"auto"});}y("#fancybox-title").show();D.hideOnContentClick?u.one("click",y.fancybox.close):u.unbind();D.hideOnOverlayClick?P.one("click",y.fancybox.close):P.unbind();D.showCloseButton?H.show():H.hide();n();D.centerOnScroll?y(window).bind("resize.fb scroll.fb",y.fancybox.center):y(window).unbind("resize.fb scroll.fb");if(y.isFunction(D.onComplete)){D.onComplete(w,e,D);}N=false;T();}function b(){var V=C();var ac={};var aa=D.margin;var W=D.autoScale;var ab=(A+aa)*2;var Z=(A+aa)*2;var X=(D.padding*2);if(D.frameWidth.toString().indexOf("%")>-1){ac.width=((V[0]*parseFloat(D.frameWidth))/100)-(A*2);W=false;}else{ac.width=D.frameWidth+X;}if(D.frameHeight.toString().indexOf("%")>-1){ac.height=((V[1]*parseFloat(D.frameHeight))/100)-(A*2);W=false;}else{ac.height=D.frameHeight+X;}if(W&&(ac.width>(V[0]-ab)||ac.height>(V[1]-Z))){if(y(w[e]).is("img")||F.type=="image"||F.type=="swf"){ab+=X;Z+=X;var Y=Math.min(Math.min(V[0]-ab,D.frameWidth)/D.frameWidth,Math.min(V[1]-Z,D.frameHeight)/D.frameHeight);ac.width=Math.round(Y*(ac.width-X))+X;ac.height=Math.round(Y*(ac.height-X))+X;}else{ac.width=Math.min(ac.width,(V[0]-ab));ac.height=Math.min(ac.height,(V[1]-Z));}}ac.top=V[3]+((V[1]-(ac.height+(A*2)))*0.5);ac.left=V[2]+((V[0]-(ac.width+(A*2)))*0.5);if(D.autoScale==false){ac.top=ac.top<V[3]+aa?V[3]+aa:ac.top;ac.left=ac.left<V[2]+aa?V[2]+aa:ac.left;}return ac;}function U(){var X=w[e];var V=C();var Z={width:1,height:1,top:V[3]+V[1]*0.5,left:V[2]+V[0]*0.5};var W=false;if(typeof X.orig!=="undefined"&&X.orig.nodeName){W=y(X.orig);}else{if(y(X).children("img:first").length){W=y(X).children("img:first");}else{if(X.nodeName){W=y(X);}}}if(W&&W.length){var Y=v(W);Z.width=Y.width+(D.padding*2);Z.height=Y.height+(D.padding*2);Z.top=Y.top-D.padding-A;Z.left=Y.left-D.padding-A;}return Z;}function n(){y(document).unbind("keydown.fb").bind("keydown.fb",function(V){if(V.keyCode==27&&D.enableEscapeButton){V.preventDefault();y.fancybox.close();}else{if(V.keyCode==37){V.preventDefault();y.fancybox.prev();}else{if(V.keyCode==39){V.preventDefault();y.fancybox.next();}}}});if(y.fn.mousewheel){J.unbind("mousewheel.fb");if(w.length>1){J.bind("mousewheel.fb",function(V,W){V.preventDefault();if(N||W==0){return;}W<0?y.fancybox.prev():y.fancybox.next();});}}if(!D.showNavArrows){return;}if((D.cyclic&&w.length>1)||e!=0){M.show();}if((D.cyclic&&w.length>1)||e!=(w.length-1)){x.show();}}function T(){if((w.length-1)>e){var V=w[e+1].href;if(typeof V!=="undefined"&&V.match(G)){var W=new Image();W.src=V;}}if(e>0){var V=w[e-1].href;if(typeof V!=="undefined"&&V.match(G)){var W=new Image();W.src=V;}}}function m(){if(!S.is(":visible")){clearInterval(o);return;}y("div",S).css("top",(K*-40)+"px");K=(K+1)%12;}function C(){return[y(window).width(),y(window).height(),y(document).scrollLeft(),y(document).scrollTop()];}function v(V){var W=V.offset();W.top+=parseFloat(V.css("paddingTop"))||0;W.left+=parseFloat(V.css("paddingLeft"))||0;W.top+=parseFloat(V.css("border-top-width"))||0;W.left+=parseFloat(V.css("border-left-width"))||0;W.width=V.width();W.height=V.height();return W;}function p(){y("#fancybox-title").remove();i=0;if(D.titleShow==false){return false;}var X=w[e];var Y=D.title;Y=y.isFunction(D.titleFormat)?D.titleFormat(Y,w,e,D):L(Y);if(Y==false||Y.length<1){return;}if(Y.length>0){var W=c.width-(D.padding*2);var V=D.titlePosition=="inside"?"fancybox-title-inside":"fancybox-title-outside";y('<div id="fancybox-title" class="'+V+'" />').css({"width":W,"paddingLeft":D.padding,"paddingRight":D.padding}).html(Y).appendTo("body");i=y("#fancybox-title").outerHeight(true);if(D.titlePosition=="outside"){y("#fancybox-title").css("bottom",i*-1);i=0;}else{i=i-D.padding;c.height+=i;}y("#fancybox-title").appendTo(d).hide();if(R){y("#fancybox-title span").fixPNG();}}}function L(V){if(V.length){return D.titlePosition=="inside"?V:'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+V+'</span><span id="fancybox-title-right"></span></span>';}return false;}function z(){if(y("#fancybox-wrap").length){return;}I=y('<div id="fancybox-tmp"></div>').appendTo("body");S=y('<div id="fancybox-loading"><div></div></div>').appendTo("body");P=y('<div id="fancybox-overlay"></div>').appendTo("body");J=y('<div id="fancybox-wrap"></div>').appendTo("body");d=y('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(J);u=y('<div id="fancybox-inner"></div').appendTo(d);H=y('<a id="fancybox-close"></a>').appendTo(d);M=y('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>').appendTo(d);x=y('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>').appendTo(d);H.click(y.fancybox.close);S.click(y.fancybox.cancel);M.bind("click",function(V){V.preventDefault();y.fancybox.prev();});x.bind("click",function(V){V.preventDefault();y.fancybox.next();});if(!y.support.opacity){d.find(".fancy-bg").fixPNG();}if(R){y(H.add(".fancy-ico").add("div",S)).fixPNG();P.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");S.get(0).style.setExpression("top","(-20 + ( document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px'");d.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>');}}y.fn.fancybox.defaults={padding:10,margin:20,opacity:false,modal:false,cyclic:false,frameWidth:560,frameHeight:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:false,overlayOpacity:0.3,overlayColor:"#666",titleShow:true,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};y(document).ready(function(){z();});})(jQuery);